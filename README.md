# Surf Interesting Places

Проект для поиска и сохранения интересных мест.

## Архитектура

Проект построен на основе принципов Clean Architecture и использует подход Feature-First. Основная цель такой архитектуры — разделение ответственностей, тестируемость и простота поддержки.

## Структура проекта

Код приложения находится в директории lib и организован следующим образом:

- lib/
    - api/: Код для взаимодействия с API (модели DTO, клиенты Retrofit).
    - assets/: Строковые константы и пути к ассетам.
    - core/: Ядро приложения. Содержит базовые классы, утилиты и абстракции, не зависящие от бизнес-логики (например, базовый репозиторий, обработка ошибок).
    - features/: Основная директория с фичами приложения.
      - app/: Корневой виджет приложения и настройка DI.
      - common/: Общие для нескольких фич виджеты, сущности, репозитории и т.д.
      - имя_фичи/: Изолированный модуль с конкретной функциональностью.
          - data/: Слой данных (реализации репозиториев, работа с API и БД).
          - domain/: Слой доменной логики (сущности, интерфейсы репозиториев, интеракторы).
          - ui/: Слой представления (экраны, виджеты, WidgetModels).
    - uikit/: Набор переиспользуемых UI-компонентов (кнопки, кастомные виджеты, темы).
    - main.dart: Точка входа в приложение для prod окружения.
    - runner.dart: Инициализация и запуск приложения.

## Структура приложения

### Сплэш

При запуске приложения отображается сплэш-экран с логотипом и анимацией. Экран показывается в течение 2 секунд, после чего происходит переход в зависимости от условий:
- Если это первое открытие приложения — осуществляется переход на экран Онбординга.
- Если пользователь уже открывал приложение ранее — переход происходит на экран Списка.

Конфигурация выполнена в файле flutter_native_splash.yaml

### Онбординг

Онбординг состоит из трёх слайдов с горизонтальным свайпа. Внизу расположен индикатор текущей страницы.

Онбординг считается завершённым, если пользователь:
- нажимает кнопку "Пропустить" в правом верхнем углу;
- нажимает кнопку "На старт" на последнем слайде.

После завершения онбординга в хранилище SharedPreferences сохраняется флаг.

### Список

Экран отображает подборку мест в виде вертикального списка карточек.
Структура экрана:
- Заголовок страницы;
- Поисковая строка;
- Список карточек.

Элемент карточки включает: название места, краткое описание, категорию. При нажатии осуществляется переход на экран Деталки.
Кнопка избранного позволяет добавить/удалить место в список избранного.

### Поиск

Поиск мест по названию. 
Поддержка состояний:
- Стандартное;
- Результаты — отображается список найденных мест;
- Пустой — если ничего не найдено;
- Ошибка.

Элементы:
- Поле ввода текста с поддержкой отложенного запроса;
- Блок результатов, где для каждого найденного места отображаются: название, тип, миниатюра.

Логика работы поиска:

Поиск начинается через 500 мс после последнего ввода. Запрос отправляется только при вводе минимум 3 символов.

Используется rxdart для реактивной обработки событий ввода.

### Карта

На экране отображаются все доступные места и текущая геопозиция пользователя (при наличии разрешения).

Функциональность:
- Отображаются все места в виде меток;
- Метка пользователя показывается с анимацией пульсации — отображается только при разрешённом доступе к геолокации;
- Поддерживается зум, ротация карты;
- Кнопка возврата к текущему положению пользователя — перемещает камеру карты в центр относительно метки пользователя.

При нажатии на метку она увеличивается, меняет цвет. Появляется Bottom Sheet с карточкой выбранного места (такой же, как на экране "Список").

Используются:
flutter_map — отображение карты;
latlong2 — работа с геокоординатами;
geolocator — определение геопозиции пользователя и управление разрешениями.

### Деталка

Экран предоставляет расширенную информацию о выбранном месте.

Элементы: фотографии места, название, подробное описание, кнопка "Поделиться", Кнопка "В избранное".

Для отправки информации о месте используется share_plus

### Избранное

Экран отображает все места, добавленные пользователем в список избранных. 
Хранение реализовано локально, синхронизируется между всеми экранами.

Структура экрана: вертикальный список карточек избранных мест.

Каждая карточка включает: название, краткое описание (до 2 строк), категорию, кнопку "Удалить из избранного", кнопку "Поделиться".

Переход в Деталку при нажатии на карточку.

### Настройки

Доступные действия:
- Кнопка "Смотреть туториал" - позволяет пересмотреть слайды туториала (Онбординг)
